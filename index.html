<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Infinitrain — Gravity Battery Power Generator</title>
  <link rel="icon" type="image/svg+xml" href="favicon.svg">
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div id="app">
    <!-- Header -->
    <header id="header">
      <div class="header-left">
        <h1>INFINITRAIN</h1>
        <span class="subtitle">Swiss Precision Gravity Battery</span>
      </div>
      <div class="header-right">
        <div class="clock" id="clock">00:00:00</div>
        <div class="status-indicator" id="status-indicator">
          <span class="dot running"></span>
          <span id="status-text">RUNNING</span>
        </div>
      </div>
    </header>

    <!-- Main Layout -->
    <div id="main-layout">
      <!-- Left Panel: 3D Visualization -->
      <div id="viz-panel">
        <canvas id="helix-canvas"></canvas>
        <div id="viz-overlay">
          <div class="viz-label" id="mountain-label">Mountain Summit — 2,400m</div>
          <div class="viz-label" id="valley-label">Valley Station — 400m</div>
        </div>
      </div>

      <!-- Right Panel: Dashboard -->
      <div id="dashboard">
        <!-- Energy Gauges -->
        <section class="dash-section">
          <h2>Energy Output</h2>
          <div class="gauge-row">
            <div class="gauge-card">
              <canvas id="gauge-generated" width="140" height="140"></canvas>
              <div class="gauge-label">Generated</div>
              <div class="gauge-value" id="val-generated">0 MW</div>
            </div>
            <div class="gauge-card">
              <canvas id="gauge-consumed" width="140" height="140"></canvas>
              <div class="gauge-label">Return Trip</div>
              <div class="gauge-value" id="val-consumed">0 MW</div>
            </div>
            <div class="gauge-card">
              <canvas id="gauge-surplus" width="140" height="140"></canvas>
              <div class="gauge-label">Datacenter</div>
              <div class="gauge-value" id="val-surplus">0 MW</div>
            </div>
          </div>
        </section>

        <!-- Dual Train Status -->
        <section class="dash-section">
          <h2>Train A <span class="train-dot train-a-dot"></span> &nbsp; Train B <span class="train-dot train-b-dot"></span></h2>
          <div class="dual-train-grid">
            <div class="dual-train-col">
              <div class="train-label-bar train-a-bar">A</div>
              <div class="mini-stat"><span class="mini-label">Phase</span><span class="mini-value" id="val-phase-a">Loading</span></div>
              <div class="mini-stat"><span class="mini-label">Alt</span><span class="mini-value" id="val-alt-a">2,400 m</span></div>
              <div class="mini-stat"><span class="mini-label">Speed</span><span class="mini-value" id="val-speed-a">0 km/h</span></div>
              <div class="mini-stat"><span class="mini-label">Water</span><span class="mini-value" id="val-water-a">0%</span></div>
            </div>
            <div class="dual-train-col">
              <div class="train-label-bar train-b-bar">B</div>
              <div class="mini-stat"><span class="mini-label">Phase</span><span class="mini-value" id="val-phase-b">Ascending</span></div>
              <div class="mini-stat"><span class="mini-label">Alt</span><span class="mini-value" id="val-alt-b">1,400 m</span></div>
              <div class="mini-stat"><span class="mini-label">Speed</span><span class="mini-value" id="val-speed-b">0 km/h</span></div>
              <div class="mini-stat"><span class="mini-label">Water</span><span class="mini-value" id="val-water-b">0%</span></div>
            </div>
          </div>
        </section>

        <!-- Catenary Transfer -->
        <section class="dash-section">
          <h2>Catenary Power Flow</h2>
          <div class="catenary-bar">
            <div class="catenary-segment cat-gen" id="cat-gen">
              <span id="cat-gen-label">A: 0 kW</span>
            </div>
            <div class="catenary-arrow">&#9889;</div>
            <div class="catenary-segment cat-con" id="cat-con">
              <span id="cat-con-label">B: 0 kW</span>
            </div>
            <div class="catenary-arrow">&#9889;</div>
            <div class="catenary-segment cat-dc" id="cat-dc">
              <span id="cat-dc-label">DC: 0 kW</span>
            </div>
          </div>
        </section>

        <!-- Cumulative Stats -->
        <section class="dash-section">
          <h2>Cumulative Performance</h2>
          <div class="cumulative-grid">
            <div class="cum-stat">
              <div class="cum-value" id="val-total-energy">0</div>
              <div class="cum-label">MWh Generated</div>
            </div>
            <div class="cum-stat">
              <div class="cum-value" id="val-total-cycles">0</div>
              <div class="cum-label">Cycles Complete</div>
            </div>
            <div class="cum-stat">
              <div class="cum-value" id="val-total-water">0</div>
              <div class="cum-label">Megalitres Moved</div>
            </div>
            <div class="cum-stat">
              <div class="cum-value" id="val-efficiency">0%</div>
              <div class="cum-label">Net Efficiency</div>
            </div>
          </div>
        </section>

        <!-- Controls -->
        <section class="dash-section controls-section">
          <h2>Controls</h2>
          <div class="controls-row">
            <button id="btn-start" class="ctrl-btn primary">&#9654; Start</button>
            <button id="btn-pause" class="ctrl-btn">&#10074;&#10074; Pause</button>
            <button id="btn-reset" class="ctrl-btn danger">&#8634; Reset</button>
          </div>
          <div class="slider-group">
            <label>Simulation Speed: <span id="speed-label">1x</span></label>
            <input type="range" id="sim-speed" min="1" max="20" value="1">
          </div>
          <div class="slider-group">
            <label>Wagons: <span id="wagon-label">8</span></label>
            <input type="range" id="wagon-count" min="2" max="20" value="8">
          </div>
        </section>
      </div>
    </div>

    <!-- Energy Flow Bar -->
    <div id="energy-flow-bar">
      <div class="flow-segment generated" id="flow-generated">
        <span>Generated: <strong id="flow-gen-val">0 MW</strong></span>
      </div>
      <div class="flow-segment consumed" id="flow-consumed">
        <span>Return: <strong id="flow-con-val">0 MW</strong></span>
      </div>
      <div class="flow-segment surplus" id="flow-surplus">
        <span>Datacenter: <strong id="flow-sur-val">0 MW</strong></span>
      </div>
    </div>
  </div>

  <script src="physics.js"></script>
  <script src="helix.js"></script>
  <script src="dashboard.js"></script>
  <script src="main.js"></script>
</body>
</html>
